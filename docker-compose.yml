version: '3'

services:
  test_browser:
    build:
      context: .
      dockerfile: ./Dockerfile-development

  app:
    build:
      context: .
      dockerfile: ./Dockerfile-development
    ports:
      - ${PORT:-3000}:3000
    depends_on:
      - postgres
      - api-dummy

  api-dummy:
    image: elifesciences/api-dummy
    ports:
      - 8080:8080

  postgres:
    image: postgres:10.4
    ports:
      - 5432:5432

  fakes3:
    image: lphoward/fake-s3
    ports:
      - 4569:4569
